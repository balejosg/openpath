{
  "name": "openpath-monorepo",
  "version": "4.1.0",
  "description": "DNS-based URL whitelist enforcement system for educational environments",
  "private": true,
  "type": "module",
  "scripts": {
    "prepare": "husky || true",
    "build": "npm run build --workspaces --if-present",
    "lint": "eslint . --max-warnings=0 --cache --cache-location .eslintcache",
    "lint:fix": "eslint . --fix --cache --cache-location .eslintcache",
    "lint:shell": "shellcheck --severity=warning linux/lib/*.sh linux/scripts/**/*.sh tests/**/*.sh",
    "clean": "npm run clean --workspaces --if-present && rm -rf node_modules",
    "test": "npm run test:shell && npm test --workspaces --if-present",
    "test:shell": "cd tests && bats *.bats",
    "test:local": "npm test --workspaces --if-present",
    "test:api": "npm test --workspace=@openpath/api",
    "test:dashboard": "npm test --workspace=@openpath/dashboard",
    "test:react-spa": "npm test --workspace=@openpath/react-spa",
    "test:e2e": "npm run test:e2e --workspace=@openpath/react-spa",
    "test:e2e:smoke": "npm run test:e2e --workspace=@openpath/react-spa -- --grep @smoke",
    "test:watch:spa": "npm run test --workspace=@openpath/react-spa -- --watch",
    "test:watch:api": "npm run test:watch --workspace=@openpath/api",
    "e2e:setup": "docker compose -f docker-compose.test.yml up -d && sleep 3 && DB_PORT=5433 DB_PASSWORD=openpath_test DB_NAME=openpath_test npm run db:setup:e2e --workspace=@openpath/api",
    "e2e:teardown": "docker compose -f docker-compose.test.yml down",
    "e2e:run": "npm run test:e2e --workspace=@openpath/react-spa",
    "e2e:full": "npm run e2e:setup && npm run e2e:run; npm run e2e:teardown",
    "typecheck": "npm run typecheck --workspaces --if-present",
    "verify": "npm run typecheck && npm run lint --workspaces --if-present",
    "verify:quick": "npm run typecheck && npm run lint && npm run format:check",
    "verify:affected": "npm run verify:quick && node scripts/affected-workspaces.js --run-tests",
    "verify:agent": "node scripts/agent-verify.js",
    "verify:static": "turbo run typecheck lint --parallel",
    "verify:checks": "concurrently --group --names 'shell,format,files' 'npm:lint:shell' 'npm:format:check' 'npm:security:files'",
    "verify:unit": "turbo run test --parallel",
    "verify:security": "concurrently --group --names 'audit,secrets,size' 'npm:security:audit' 'npm:security:secrets' 'npm:size:check'",
    "verify:full": "npm run verify:static && npm run verify:checks && npm run verify:unit && npm run e2e:full && npm run verify:security",
    "format:check": "prettier --check .",
    "format:fix": "prettier --write .",
    "security:secrets": "secretlint '**/*.{js,ts,tsx,json,yml,yaml,env,env.*}'",
    "security:audit": "npm audit --audit-level=high",
    "security:files": "bash scripts/check-sensitive-files.sh",
    "size:check": "test -d react-spa/dist && npm run size --workspace=@openpath/react-spa || echo 'SKIP: react-spa/dist not built, skipping size check'"
  },
  "devDependencies": {
    "@commitlint/cli": "^20.4.0",
    "@commitlint/config-conventional": "^20.4.0",
    "@eslint/js": "^10.0.1",
    "@secretlint/secretlint-rule-preset-recommend": "^11.3.1",
    "@size-limit/preset-app": "^12.0.0",
    "concurrently": "^9.2.1",
    "eslint": "^10.0.0",
    "eslint-plugin-no-only-tests": "^3.3.0",
    "husky": "^9.1.7",
    "lint-staged": "^15.2.10",
    "prettier": "^3.8.1",
    "secretlint": "^11.3.1",
    "size-limit": "^12.0.0",
    "turbo": "^2.8.3",
    "typescript-eslint": "^8.56.0"
  },
  "lint-staged": {
    "*.{js,ts,tsx,mjs,cjs}": [
      "bash -c 'files=\"$@\"; filtered=\"$(echo \"$files\" | tr \" \" \"\\n\" | grep -v \"_backup/\" | tr \"\\n\" \" \")\"; [ -n \"$filtered\" ] && eslint --fix $filtered || true' --",
      "prettier --write",
      "secretlint"
    ],
    "*.{json,yml,yaml,env*}": [
      "secretlint"
    ],
    "*.{json,md,yml,yaml}": [
      "prettier --write"
    ]
  },
  "engines": {
    "node": ">=20.0.0"
  },
  "packageManager": "npm@10.9.3",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/balejosg/openpath.git"
  },
  "keywords": [
    "dns",
    "whitelist",
    "dnsmasq",
    "education",
    "content-filter"
  ],
  "license": "AGPL-3.0-or-later",
  "workspaces": [
    "api",
    "react-spa",
    "shared",
    "dashboard",
    "firefox-extension"
  ],
  "overrides": {
    "esbuild": "^0.25.0",
    "qs": "^6.14.2",
    "minimatch": "^10.2.1",
    "swagger-jsdoc": {
      "glob": "^11.0.0"
    }
  }
}
